// const items = [
//     {
//         item_id: '001',
//         category: 'drinks',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'The reall',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date: "14 Feb",
//     },
//     {
//         item_id: '001',
//         category: 'drinks',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'The reall',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date: "14 Feb",
//     },
//     {
//         item_id: '001',
//         category: 'drinks',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'The reall',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date: "14 Feb",
//     },
//     {
//         item_id: '002',
//         category: 'health',
//         item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70229.jpg?w=2000',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The maen Real',
//         current_price: 151,
//         original_price: 340,
//         delivery_date: "14 Feb",
//         discount_percentage: 27,
//     },
//     {
//         item_id: '002',
//         category: 'health',
//         item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70229.jpg?w=2000',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The maen Real',
//         current_price: 151,
//         original_price: 340,
//         delivery_date: "14 Feb",
//         discount_percentage: 27,
//     },
//     {
//         item_id:'003',
//         category: 'hygiene',
//         item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70227.jpg?w=2000',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'004',
//         category: 'hygiene',
//         item_image: 'https://leslieporterfield.com/wp-content/uploads/2020/01/images1306-5e14250b08c5f.jpg ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'005',
//         category: 'cleaning',
//         item_image: 'https://thh.bing.com/th/id/OIP.xN9DyVxndji8NQTjr5zVfQAAAA?w=355&h=560&rs=1&pid=ImgDetMain ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'005',
//         category: 'cleaning',
//         item_image: 'https://thh.bing.com/th/id/OIP.xN9DyVxndji8NQTjr5zVfQAAAA?w=355&h=560&rs=1&pid=ImgDetMain ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'006',
//         category: 'nutrition',
//         item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'006',
//         category: 'nutrition',
//         item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'006',
//         category: 'nutrition',
//         item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'007',
//         category: 'nutrition',
//         item_image: ' https://static.vecteezy.com/system/resources/previews/029/543/509/non_2x/a-cartoon-character-in-a-grocery-store-selling-fruit-ai-generated-pro-photo.jpg',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'008',
//         category: 'studio',
//         item_image: 'https://www.indigoag.com.br/hubfs/milhor%20agricultor%20jovem.jpg',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'009',
//         category: 'studio',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'009',
//         category: 'studio',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
//     {
//         item_id:'009',
//         category: 'studio',
//         item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
//         rating: { stars: 4.5, noOfReviews: 1400 },
//         company_name: 'Gold man',
//         item_name: 'The Gold Food',
//         current_price: 101,
//         original_price: 300,
//         discount_percentage: 67,
//         delivery_date:"14 Feb",
//     },
    
// ];
 
  
 
// const a1 = document.getElementById("bag");

// a1.addEventListener("click", (e) => {
//     e.preventDefault();
//     window.location.href = "Bag.html";
// });

// let bagItems = [];
// onLoad();

// function onLoad() {
//     let bagItemsStr = localStorage.getItem('bagItems');
//     bagItems = bagItemsStr ? JSON.parse(bagItemsStr) : [];
//     displayRenderItems();
//     displayBagIcon();
// }

// function addToCart(itemName) {
//     bagItems.push(itemName);
//     localStorage.setItem('bagItems', JSON.stringify(bagItems));  
//     displayBagIcon();
// }

// function displayBagIcon() {
//     let bagItemsCountElement = document.querySelector('.bag-item-count');
//     if (bagItems.length > 0) {
//         bagItemsCountElement.style.visibility = 'visible';
//         bagItemsCountElement.innerText = bagItems.length; 
//     } else {
//         bagItemsCountElement.style.visibility = 'hidden';
//     }
// }

// function displayRenderItems() {
//     items.forEach(item => {
//         const categoryContainer = document.getElementById(item.category);
//         if (!categoryContainer) {
//             return;
//         }

//         const productElement = document.createElement("div");
//         productElement.classList.add("product-item");
//         productElement.setAttribute("data-name", item.item_name.toLowerCase());  

//         productElement.innerHTML = `
//             <div class="product-image">
//                 <img src="${item.item_image}" alt="${item.item_name}">
//             </div>
//             <div class="product-details">
//                 <h3>${item.item_name}</h3>
//                 <p>Company: ${item.company_name}</p>
//                 <p>Rating: ${item.rating.stars} stars (${item.rating.noOfReviews} reviews)</p>
//                 <p><span class="current-price">$${item.current_price}</span> <span class="original-price">${item.original_price}</span></p>
//                 <p>Discount: ${item.discount_percentage}% OFF</p>
//                 <button class="add-to-cart" onclick="addToCart('${item.item_name}')">Add to Cart</button>
//             </div>
//         `;
//         categoryContainer.appendChild(productElement);
//     });
// }
 
// function searchProducts() { 

//     const searchInput = document.getElementById('searchInput').value.toLowerCase();
     
//     const productItems = document.querySelectorAll('.product-item');
     
//     productItems.forEach(item => { 

//         const productName = item.getAttribute('data-name').toLowerCase();
         
//         if (productName.includes(searchInput)) {
            
//             item.style.display = 'block';
//         } else {
            
//             item.style.display = 'none';
//         }
//     });
// } 

// const searchInput = document.getElementById('searchInput');
// searchInput.addEventListener('input', searchProducts);  

const items = [
    {
                item_id: '001',
                category: 'drinks',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'The reall',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date: "14 Feb",
            },
            {
                item_id: '001',
                category: 'drinks',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'The reall',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date: "14 Feb",
            },
            {
                item_id: '001',
                category: 'drinks',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'The reall',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date: "14 Feb",
            },
            {
                item_id: '002',
                category: 'health',
                item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70229.jpg?w=2000',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The maen Real',
                current_price: 151,
                original_price: 340,
                delivery_date: "14 Feb",
                discount_percentage: 27,
            },
            {
                item_id: '002',
                category: 'health',
                item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70229.jpg?w=2000',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The maen Real',
                current_price: 151,
                original_price: 340,
                delivery_date: "14 Feb",
                discount_percentage: 27,
            },
            {
                item_id:'003',
                category: 'hygiene',
                item_image: 'https://img.freepik.com/premium-photo/3d-illustration-grocer-man-isolated-market-backgroundshopping-consept_175994-70227.jpg?w=2000',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'004',
                category: 'hygiene',
                item_image: 'https://leslieporterfield.com/wp-content/uploads/2020/01/images1306-5e14250b08c5f.jpg ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'005',
                category: 'cleaning',
                item_image: 'https://thh.bing.com/th/id/OIP.xN9DyVxndji8NQTjr5zVfQAAAA?w=355&h=560&rs=1&pid=ImgDetMain ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'005',
                category: 'cleaning',
                item_image: 'https://thh.bing.com/th/id/OIP.xN9DyVxndji8NQTjr5zVfQAAAA?w=355&h=560&rs=1&pid=ImgDetMain ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'006',
                category: 'nutrition',
                item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'006',
                category: 'nutrition',
                item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'006',
                category: 'nutrition',
                item_image: 'https://th.bing.com/th/id/OIP.vWTM85S-puoeh51NNbdX7AHaLb?w=1050&h=1620&rs=1&pid=ImgDetMain ',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'007',
                category: 'nutrition',
                item_image: ' https://static.vecteezy.com/system/resources/previews/029/543/509/non_2x/a-cartoon-character-in-a-grocery-store-selling-fruit-ai-generated-pro-photo.jpg',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'008',
                category: 'studio',
                item_image: 'https://www.indigoag.com.br/hubfs/milhor%20agricultor%20jovem.jpg',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'009',
                category: 'studio',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'009',
                category: 'studio',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            },
            {
                item_id:'009',
                category: 'studio',
                item_image: 'https://th.bing.com/th/id/OIP.YBaLhwi05jZ-OjAWq0Xj3wHaHa?pid=ImgDet&w=185&h=185&c=7&dpr=1.3',
                rating: { stars: 4.5, noOfReviews: 1400 },
                company_name: 'Gold man',
                item_name: 'The Gold Food',
                current_price: 101,
                original_price: 300,
                discount_percentage: 67,
                delivery_date:"14 Feb",
            }
];

const a1 = document.getElementById("bag");

a1.addEventListener("click", (e) => {
    e.preventDefault();
    window.location.href = "bag.html";
});

let bagItems = [];
onLoad();

function onLoad() {
    let bagItemsStr = localStorage.getItem('bagItems');
    bagItems = bagItemsStr ? JSON.parse(bagItemsStr) : [];
    displayRenderItems();
    displayBagIcon();
}

function addToCart(itemName) {
    bagItems.push(itemName);
    localStorage.setItem('bagItems', JSON.stringify(bagItems));  
    displayBagIcon();
}

function displayBagIcon() {
    let bagItemsCountElement = document.querySelector('.bag-item-count');
    if (bagItems.length > 0) {
        bagItemsCountElement.style.visibility = 'visible';
        bagItemsCountElement.innerText = bagItems.length; 
    } else {
        bagItemsCountElement.style.visibility = 'hidden';
    }
}

function displayRenderItems() {
    items.forEach(item => {
        const categoryContainer = document.getElementById(item.category);
        if (!categoryContainer) {
            return;
        }

        const productElement = document.createElement("div");
        productElement.classList.add("product-item");
        productElement.setAttribute("data-name", item.item_name.toLowerCase());

        productElement.innerHTML = `
            <div class="product-image">
                <img src="${item.item_image}" alt="${item.item_name}">
            </div>
            <div class="product-details">
                <h3>${item.item_name}</h3>
                <p>Company: ${item.company_name}</p>
                <p>Rating: ${item.rating.stars} stars (${item.rating.noOfReviews} reviews)</p>
                <p><span class="current-price">$${item.current_price}</span> <span class="original-price">${item.original_price}</span></p>
                <p>Discount: ${item.discount_percentage}% OFF</p>
                <button class="add-to-cart" onclick="addToCart('${item.item_name}')">Add to Cart</button>
            </div>
        `;
        categoryContainer.appendChild(productElement);
    });
}

function searchProducts() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase();
    const productItems = document.querySelectorAll('.product-item');
    
    productItems.forEach(item => { 
        const productName = item.getAttribute('data-name').toLowerCase();
        if (productName.includes(searchInput)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

const searchInput = document.getElementById('searchInput');
searchInput.addEventListener('input', searchProducts);
